<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cyprinidae Features</title>
<script src="https://cdn.jsdelivr.net/npm/alasql@1.7"></script>
<style>
 body {
      font-family: "Trebuchet MS", "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans";
        margin: 0;

    }
	
* {
  box-sizing: border-box;
}

.mainbody { padding-left:16px }

.topnav {
  overflow: hidden;
  background-color: #333;
}

.topnav a {
  float: left;
  color: #f2f2f2;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
  font-size: 17px;
}

.topnav a:hover {
  background-color: #ddd;
  color: black;
}

.topnav a.active {
  background-color: #04AA6D;
  color: white;
}

.row {
  display: flex;
}

/* Create two equal columns that sits next to each other */
.column {
  flex: 50%;
  padding: 10px;
}

/* Use a media query to add a break point at 800px: */
@media screen and (max-width: 700px) {
  .row {
    display: block; /* The width is 100%, when the viewport is 800px or smaller */
}
}

input[type=text], select {
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  display: inline-block;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
}

input[type=submit] {
  width: 100%;
  background-color: #4CAF50;
  color: white;
  padding: 14px 20px;
  margin: 8px 0;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

input[type=submit]:hover {
  background-color: #45a049;
}

#fishform {
  border-radius: 5px;
  background-color: #f2f2f2;
  padding: 20px;
}
</style>

<script>
var data = [
 {
   "Species": "Blackchin Shiner",
   "LatLineMin": 31,
   "LatLineMax": 38,
   "DorsalMin": 7,
   "DorsalMax": 8,
   "AnalRayMin": 7,
   "AnalRayMax": 8,
   "Barbels": -1,
   "FrenumGroove": 0,
   "MouthTerm": 1,
   "MouthSubterm": 0,
   "BodyType": 1
 },
 {
   "Species": "Blacknose Dace",
   "LatLineMin": 56,
   "LatLineMax": 68,
   "DorsalMin": 8,
   "DorsalMax": 8,
   "AnalRayMin": 6,
   "AnalRayMax": 8,
   "Barbels": 1,
   "FrenumGroove": 1,
   "MouthTerm": 0,
   "MouthSubterm": 1,
   "BodyType": 1
 },
 {
   "Species": "Blacknose Shiner",
   "LatLineMin": 32,
   "LatLineMax": 40,
   "DorsalMin": 7,
   "DorsalMax": 9,
   "AnalRayMin": 7,
   "AnalRayMax": 8,
   "Barbels": -1,
   "FrenumGroove": 0,
   "MouthTerm": 0,
   "MouthSubterm": 1,
   "BodyType": 0
 },
 {
   "Species": "Bluntnose Minnow",
   "LatLineMin": 42,
   "LatLineMax": 50,
   "DorsalMin": 8,
   "DorsalMax": 8,
   "AnalRayMin": 7,
   "AnalRayMax": 8,
   "Barbels": 1,
   "FrenumGroove": 0,
   "MouthTerm": 0,
   "MouthSubterm": 1,
   "BodyType": 0
 },
 {
   "Species": "Brassy Minnow ",
   "LatLineMin": 36,
   "LatLineMax": 41,
   "DorsalMin": 7,
   "DorsalMax": 8,
   "AnalRayMin": 6,
   "AnalRayMax": 9,
   "Barbels": -1,
   "FrenumGroove": 0,
   "MouthTerm": 0,
   "MouthSubterm": 1,
   "BodyType": 1
 },
 {
   "Species": "Bridle Shiner ",
   "LatLineMin": 33,
   "LatLineMax": 36,
   "DorsalMin": 7,
   "DorsalMax": 8,
   "AnalRayMin": 7,
   "AnalRayMax": 8,
   "Barbels": -1,
   "FrenumGroove": 0,
   "MouthTerm": 1,
   "MouthSubterm": 0,
   "BodyType": 0
 },
 {
   "Species": "Central Stoneroller ",
   "LatLineMin": 49,
   "LatLineMax": 55,
   "DorsalMin": 8,
   "DorsalMax": 8,
   "AnalRayMin": 7,
   "AnalRayMax": 7,
   "Barbels": -1,
   "FrenumGroove": 0,
   "MouthTerm": 0,
   "MouthSubterm": 1,
   "BodyType": 1
 },
 {
   "Species": "Common Carp ",
   "LatLineMin": 35,
   "LatLineMax": 39,
   "DorsalMin": 15,
   "DorsalMax": 15,
   "AnalRayMin": 8,
   "AnalRayMax": 9,
   "Barbels": 2,
   "FrenumGroove": 0,
   "MouthTerm": 1,
   "MouthSubterm": 1,
   "BodyType": 2
 },
 {
   "Species": "Common Shiner ",
   "LatLineMin": 36,
   "LatLineMax": 42,
   "DorsalMin": 8,
   "DorsalMax": 8,
   "AnalRayMin": 8,
   "AnalRayMax": 10,
   "Barbels": -1,
   "FrenumGroove": 0,
   "MouthTerm": 1,
   "MouthSubterm": 0,
   "BodyType": 2
 },
 {
   "Species": "Creek Chub ",
   "LatLineMin": 52,
   "LatLineMax": 62,
   "DorsalMin": 8,
   "DorsalMax": 9,
   "AnalRayMin": 7,
   "AnalRayMax": 9,
   "Barbels": 0,
   "FrenumGroove": 0,
   "MouthTerm": 1,
   "MouthSubterm": 0,
   "BodyType": 1
 },
 {
   "Species": "Cutlip Minnow",
   "LatLineMin": 50,
   "LatLineMax": 53,
   "DorsalMin": 8,
   "DorsalMax": 8,
   "AnalRayMin": 7,
   "AnalRayMax": 7,
   "Barbels": -1,
   "FrenumGroove": 1,
   "MouthTerm": 0,
   "MouthSubterm": 1,
   "BodyType": 1
 },
 {
   "Species": "Eastern Silvery Minnow",
   "LatLineMin": 38,
   "LatLineMax": 40,
   "DorsalMin": 8,
   "DorsalMax": 8,
   "AnalRayMin": 8,
   "AnalRayMax": 9,
   "Barbels": -1,
   "FrenumGroove": 0,
   "MouthTerm": 0,
   "MouthSubterm": 1,
   "BodyType": 1
 },
 {
   "Species": "Emerald Shiner ",
   "LatLineMin": 38,
   "LatLineMax": 43,
   "DorsalMin": 7,
   "DorsalMax": 8,
   "AnalRayMin": 10,
   "AnalRayMax": 13,
   "Barbels": -1,
   "FrenumGroove": 0,
   "MouthTerm": 1,
   "MouthSubterm": 0,
   "BodyType": 0
 },
 {
   "Species": "Fallfish ",
   "LatLineMin": 43,
   "LatLineMax": 50,
   "DorsalMin": 8,
   "DorsalMax": 8,
   "AnalRayMin": 7,
   "AnalRayMax": 9,
   "Barbels": 0,
   "FrenumGroove": 0,
   "MouthTerm": 1,
   "MouthSubterm": 1,
   "BodyType": 1
 },
 {
   "Species": "Fathead Minnow",
   "LatLineMin": 41,
   "LatLineMax": 54,
   "DorsalMin": 8,
   "DorsalMax": 8,
   "AnalRayMin": 7,
   "AnalRayMax": 7,
   "Barbels": -1,
   "FrenumGroove": 0,
   "MouthTerm": 1,
   "MouthSubterm": 0,
   "BodyType": 2
 },
 {
   "Species": "Finescale Dace",
   "LatLineMin": 63,
   "LatLineMax": 85,
   "DorsalMin": 7,
   "DorsalMax": 9,
   "AnalRayMin": 7,
   "AnalRayMax": 9,
   "Barbels": -1,
   "FrenumGroove": 0,
   "MouthTerm": 1,
   "MouthSubterm": 0,
   "BodyType": 1
 },
 {
   "Species": "Ghost Shiner ",
   "LatLineMin": 30,
   "LatLineMax": 35,
   "DorsalMin": 8,
   "DorsalMax": 8,
   "AnalRayMin": 8,
   "AnalRayMax": 8,
   "Barbels": -1,
   "FrenumGroove": 0,
   "MouthTerm": 1,
   "MouthSubterm": 1,
   "BodyType": 1
 },
 {
   "Species": "Golden Shiner",
   "LatLineMin": 44,
   "LatLineMax": 54,
   "DorsalMin": 7,
   "DorsalMax": 9,
   "AnalRayMin": 11,
   "AnalRayMax": 13,
   "Barbels": -1,
   "FrenumGroove": 0,
   "MouthTerm": 1,
   "MouthSubterm": 0,
   "BodyType": 2
 },
 {
   "Species": "Goldfish",
   "LatLineMin": 25,
   "LatLineMax": 32,
   "DorsalMin": 15,
   "DorsalMax": 15,
   "AnalRayMin": 5,
   "AnalRayMax": 6,
   "Barbels": -1,
   "FrenumGroove": 0,
   "MouthTerm": 1,
   "MouthSubterm": 0,
   "BodyType": 2
 },
 {
   "Species": "Gravel Chub",
   "LatLineMin": 38,
   "LatLineMax": 45,
   "DorsalMin": 8,
   "DorsalMax": 8,
   "AnalRayMin": 7,
   "AnalRayMax": 7,
   "Barbels": 1,
   "FrenumGroove": 0,
   "MouthTerm": 0,
   "MouthSubterm": 1,
   "BodyType": 0
 },
 {
   "Species": "Hornyhead Chub",
   "LatLineMin": 40,
   "LatLineMax": 48,
   "DorsalMin": 7,
   "DorsalMax": 8,
   "AnalRayMin": 7,
   "AnalRayMax": 8,
   "Barbels": 1,
   "FrenumGroove": 0,
   "MouthTerm": 1,
   "MouthSubterm": 1,
   "BodyType": 1
 },
 {
   "Species": "Lake Chub",
   "LatLineMin": 53,
   "LatLineMax": 79,
   "DorsalMin": 8,
   "DorsalMax": 8,
   "AnalRayMin": 7,
   "AnalRayMax": 9,
   "Barbels": 1,
   "FrenumGroove": 0,
   "MouthTerm": 1,
   "MouthSubterm": 1,
   "BodyType": 0
 },
 {
   "Species": "Longnose Dace",
   "LatLineMin": 61,
   "LatLineMax": 72,
   "DorsalMin": 8,
   "DorsalMax": 8,
   "AnalRayMin": 7,
   "AnalRayMax": 7,
   "Barbels": 1,
   "FrenumGroove": 1,
   "MouthTerm": 0,
   "MouthSubterm": 1,
   "BodyType": 0
 },
 {
   "Species": "Mimic Shiner",
   "LatLineMin": 36,
   "LatLineMax": 39,
   "DorsalMin": 8,
   "DorsalMax": 8,
   "AnalRayMin": 8,
   "AnalRayMax": 9,
   "Barbels": -1,
   "FrenumGroove": 0,
   "MouthTerm": 0,
   "MouthSubterm": 1,
   "BodyType": 0
 },
 {
   "Species": "Northern Pearl Dace",
   "LatLineMin": 65,
   "LatLineMax": 75,
   "DorsalMin": 7,
   "DorsalMax": 8,
   "AnalRayMin": 7,
   "AnalRayMax": 8,
   "Barbels": 0,
   "FrenumGroove": 0,
   "MouthTerm": 1,
   "MouthSubterm": 1,
   "BodyType": 0
 },
 {
   "Species": "Northern Redbelly Dace",
   "LatLineMin": 70,
   "LatLineMax": 90,
   "DorsalMin": 7,
   "DorsalMax": 9,
   "AnalRayMin": 7,
   "AnalRayMax": 8,
   "Barbels": -1,
   "FrenumGroove": 0,
   "MouthTerm": 1,
   "MouthSubterm": 0,
   "BodyType": 1
 },
 {
   "Species": "Pugnose Minnow",
   "LatLineMin": 35,
   "LatLineMax": 41,
   "DorsalMin": 9,
   "DorsalMax": 9,
   "AnalRayMin": 8,
   "AnalRayMax": 8,
   "Barbels": 1,
   "FrenumGroove": 0,
   "MouthTerm": 1,
   "MouthSubterm": 0,
   "BodyType": 1
 },
 {
   "Species": "Pugnose Shiner",
   "LatLineMin": 34,
   "LatLineMax": 38,
   "DorsalMin": 7,
   "DorsalMax": 8,
   "AnalRayMin": 7,
   "AnalRayMax": 8,
   "Barbels": -1,
   "FrenumGroove": 0,
   "MouthTerm": 1,
   "MouthSubterm": 0,
   "BodyType": 0
 },
 {
   "Species": "Redfin Shiner",
   "LatLineMin": 39,
   "LatLineMax": 46,
   "DorsalMin": 7,
   "DorsalMax": 8,
   "AnalRayMin": 10,
   "AnalRayMax": 12,
   "Barbels": -1,
   "FrenumGroove": 0,
   "MouthTerm": 1,
   "MouthSubterm": 0,
   "BodyType": 1
 },
 {
   "Species": "Redside Dace",
   "LatLineMin": 63,
   "LatLineMax": 70,
   "DorsalMin": 7,
   "DorsalMax": 8,
   "AnalRayMin": 8,
   "AnalRayMax": 10,
   "Barbels": -1,
   "FrenumGroove": 0,
   "MouthTerm": 1,
   "MouthSubterm": 0,
   "BodyType": 1
 },
 {
   "Species": "River Chub ",
   "LatLineMin": 39,
   "LatLineMax": 43,
   "DorsalMin": 7,
   "DorsalMax": 8,
   "AnalRayMin": 7,
   "AnalRayMax": 8,
   "Barbels": 1,
   "FrenumGroove": 0,
   "MouthTerm": 1,
   "MouthSubterm": 1,
   "BodyType": 1
 },
 {
   "Species": "Roseyface Shiner",
   "LatLineMin": 37,
   "LatLineMax": 41,
   "DorsalMin": 8,
   "DorsalMax": 8,
   "AnalRayMin": 9,
   "AnalRayMax": 11,
   "Barbels": -1,
   "FrenumGroove": 0,
   "MouthTerm": 1,
   "MouthSubterm": 0,
   "BodyType": 0
 },
 {
   "Species": "Rudd ",
   "LatLineMin": 36,
   "LatLineMax": 45,
   "DorsalMin": 8,
   "DorsalMax": 9,
   "AnalRayMin": 10,
   "AnalRayMax": 11,
   "Barbels": -1,
   "FrenumGroove": 0,
   "MouthTerm": 1,
   "MouthSubterm": 0,
   "BodyType": 2
 },
 {
   "Species": "Sand Shiner",
   "LatLineMin": 31,
   "LatLineMax": 38,
   "DorsalMin": 8,
   "DorsalMax": 8,
   "AnalRayMin": 6,
   "AnalRayMax": 7,
   "Barbels": -1,
   "FrenumGroove": 0,
   "MouthTerm": 0,
   "MouthSubterm": 1,
   "BodyType": 0
 },
 {
   "Species": "Silver Chub",
   "LatLineMin": 35,
   "LatLineMax": 41,
   "DorsalMin": 8,
   "DorsalMax": 8,
   "AnalRayMin": 7,
   "AnalRayMax": 8,
   "Barbels": 1,
   "FrenumGroove": 0,
   "MouthTerm": 0,
   "MouthSubterm": 1,
   "BodyType": 1
 },
 {
   "Species": "Silver Shiner ",
   "LatLineMin": 36,
   "LatLineMax": 43,
   "DorsalMin": 8,
   "DorsalMax": 8,
   "AnalRayMin": 9,
   "AnalRayMax": 11,
   "Barbels": -1,
   "FrenumGroove": 0,
   "MouthTerm": 1,
   "MouthSubterm": 0,
   "BodyType": 0
 },
 {
   "Species": "Spotfin Shiner",
   "LatLineMin": 35,
   "LatLineMax": 41,
   "DorsalMin": 7,
   "DorsalMax": 8,
   "AnalRayMin": 7,
   "AnalRayMax": 9,
   "Barbels": -1,
   "FrenumGroove": 0,
   "MouthTerm": 1,
   "MouthSubterm": 0,
   "BodyType": 1
 },
 {
   "Species": "Spottail Shiner ",
   "LatLineMin": 37,
   "LatLineMax": 39,
   "DorsalMin": 8,
   "DorsalMax": 9,
   "AnalRayMin": 7,
   "AnalRayMax": 8,
   "Barbels": -1,
   "FrenumGroove": 0,
   "MouthTerm": 0,
   "MouthSubterm": 1,
   "BodyType": 0
 },
 {
   "Species": "Striped Shiner ",
   "LatLineMin": 36,
   "LatLineMax": 42,
   "DorsalMin": 8,
   "DorsalMax": 8,
   "AnalRayMin": 8,
   "AnalRayMax": 9,
   "Barbels": -1,
   "FrenumGroove": 0,
   "MouthTerm": 1,
   "MouthSubterm": 0,
   "BodyType": 2
 }
];

function showFishResults() {
	var LatLineValue = document.getElementById("LatLineSelect").value;
	var sql = `SELECT Species FROM ? WHERE 1=1`  // Starts SQL statement
	
	if (LatLineValue >= 0) {
		sql += ` AND ([LatLineMin] <= ${LatLineValue}) AND ([LatLineMax] >= ${LatLineValue})`;
	}
	var DorsalRayValue = document.getElementById('DorsalRaySelect').value;
	if (DorsalRayValue >= 0) {
		sql += ` AND ([DorsalMin] <= ${DorsalRayValue}) AND ([DorsalMax] >= ${DorsalRayValue})`;
	}
	var AnalRayValue = document.getElementById('AnalRaySelect').value;
	if (AnalRayValue >= 0) {
		sql += ` AND ([AnalRayMin] <= ${AnalRayValue}) AND ([AnalRayMax] >= ${AnalRayValue})`;
	}
	var BarbelsValue = document.getElementById('BarbelsSelect').value;
	if (BarbelsValue >= 0) {
		sql += ` AND ([Barbels] = ${BarbelsValue})`;
	}
	
	var FrenumValue = document.getElementById('FrenumSelect').value;
	if (FrenumValue >= 0) {
		sql += ` AND ([FrenumGroove] = ${FrenumValue})`;
	}

	var BodyTypeValue = document.getElementById('BodyTypeSelect').value;
	if (BodyTypeValue >= 0) {
		sql += ` AND ([BodyType] = ${BodyTypeValue})`;
	}
	
	if (document.getElementById('MouthTerminalCheck').checked == true) {
		sql += ' AND [MouthTerm] = 1';
	}

	if (document.getElementById('MouthSubTerminalCheck').checked == true) {
		sql += ' AND [MouthSubterm] = 1';
	}

	
	// Do query
	console.log(sql);
	var res = alasql(sql, [data]);
	console.log(res);
        document.getElementById('resultCount').innerHTML = res.length + " ";
	var fishList = document.getElementById('resultsList');
	fishList.innerHTML = '';
	for (var i = 0; i < res.length; i++) {
		// Populate element LatLineSelect with values from the select.
		fishList.innerHTML = fishList.innerHTML + '<li>' + res[i].Species + '</li>';
	}
	
}


function initalizeForm() {
	var ele = document.getElementById('LatLineSelect');
	for (var i = 25; i < 91; i++) {
		// Populate element LatLineSelect with values from 25 to 90.
		ele.innerHTML = ele.innerHTML + '<option value="' + i + '">' + i + '</option>';
	}

	ele = document.getElementById('DorsalRaySelect');
	for (var i = 7; i < 16; i++) {
		// Populate element LatLineSelect with values.
		ele.innerHTML = ele.innerHTML + '<option value="' + i + '">' + i + '</option>';
	}	

	ele = document.getElementById('AnalRaySelect');
	for (var i = 5; i < 14; i++) {
		// Populate element LatLineSelect with values.
		ele.innerHTML = ele.innerHTML + '<option value="' + i + '">' + i + '</option>';
	}	


	showFishResults();
}




</script>
</head>
<body>
<div class="topnav">
  <a href="index.html">Home</a>
  <a class="active" href="carp.html">Cyprinidae</a>
  <a href="salmon.html">Juvenile Salmoninae</a>
</div>
<div class="mainbody">
<h1>Cyprinidae Features</h1>

<div class="row"><div class="column"><div id="fishform"><form>
<p>
<label for="LatLineSelect">Lateral line scale count:</label>

<select name="LatLineSelect" onchange="showFishResults()" id="LatLineSelect">
	<option selected value="-1">N/A</option>
</select>
</p>
<p>
<label for="DorsalRaySelect">Dorsal ray count:</label>

<select name="DorsalRaySelect" onchange="showFishResults()" id="DorsalRaySelect">
	<option selected value="-1">N/A</option>
</select>
</p>
<p>
<label for="AnalRaySelect">Anal ray count:</label>

<select name="AnalRaySelect" onchange="showFishResults()" id="AnalRaySelect">
	<option selected value="-1">N/A</option>
</select>
</p>
<p>
<label for="BarbelsSelect">Barbels:</label>

<select name="BarbelsSelect" size="4" onchange="showFishResults()" id="BarbelsSelect">
	<option selected value="-1">N/A</option>
	<option value="0">Hidden in groove</option>
	<option value="1">Terminal</option>
	<option value="2">2 Pair</option>
</select>
</p>
<p>
<label for="FrenumSelect">Frenum or Groove:</label>

<select name="FrenumSelect" size="3" onchange="showFishResults()" id="FrenumSelect">
	<option selected value="-1">N/A</option>
	<option value="1">Frenum</option>
	<option value="0">Groove</option>
</select>
</p>
<p>
<input type="checkbox" id="MouthTerminalCheck" name="MouthTerminal" value="1" onclick="showFishResults()">
<label for="MouthTerminalCheck">Mouth Terminal</label><br>
</p>
<p>
<input type="checkbox" id="MouthSubTerminalCheck" name="MouthSubTerminal" value="1" onclick="showFishResults()">
<label for="MouthSubTerminalCheck">Mouth Subterminal</label><br>
</p>
<p>
<label for="BodyTypeSelect">Body type:</label>

<select name="BodyTypeSelect" size="4" onchange="showFishResults()" id="BodyTypeSelect">
	<option selected value="-1">N/A</option>
	<option value="0">Elongated</option>
	<option value="1">Slight deep bodied</option>
	<option value="2">Deep bodied</option>
</select>
</p>
</form>
</div></div>
<!--Results-->
<div class="column">
<h1><span id="resultCount"></span>Results</h1>
<ol id="resultsList">
<li>Loading...</li>
</ol>
</div></div>
  <p><a href="https://www.flemingcollege/senrs"><img alt="Fleming College Website" src="https://geocommunity.net/Fleming-SENRS-Logo-BLK-type-CMYK.svg" width="200"></a></p>
  <p>These keys were designed to be used within the Fleming College School of Natural Resource Sciences various Aquaculture courses and programs. Find more information at <a href="https://www.flemingcollege.ca/senrs" target="_blank">https://www.flemingcollege.ca/senrs</a></p>
  <p>&copy; 2022 Shawn Morgan with contributions from Brian Round. 
<script>
  initalizeForm();
</script>
</div>
</body>
</html>
